# NEX Automat - Roadmap

**Projekt:** NEX Automat  
**Verzia dokumentu:** 1.0  
**DÃ¡tum:** 2025-11-26  

---

## 1. PREHÄ½AD FÃZ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FÃZA 1: Email â†’ Staging â†’ GUI Zobrazenie          âœ… COMPLETE         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 2: GO-LIVE Preview/Demo                      ğŸŸ¡ IN PROGRESS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 3: Btrieve Models (TSH, TSI, PLS, RPC)       âšª TODO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 4: GUI EditÃ¡cia + FarebnÃ© rozlÃ­Å¡enie         âšª TODO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 5: Vytvorenie produktovÃ½ch kariet            âšª TODO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 6: Zaevidovanie dodÃ¡vateÄ¾skÃ©ho DL            âšª TODO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 7: PoÅ¾iadavky na zmenu cien                  âšª TODO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 8: Testovanie + Production Hardening         âšª TODO             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FÃZA 9: ÄalÅ¡Ã­ zÃ¡kaznÃ­ci + RozÅ¡Ã­renia              âšª FUTURE           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. DETAILNÃ POPIS FÃZ

### FÃZA 1: Email â†’ Staging â†’ GUI Zobrazenie âœ… COMPLETE

**CieÄ¾:** AutomatickÃ© spracovanie faktÃºr aÅ¾ po zobrazenie v GUI

**Deliverables:**
- [x] n8n workflow (IMAP â†’ PDF â†’ FastAPI)
- [x] PDF extrakcia (pdfplumber + regex)
- [x] ISDOC XML generÃ¡tor
- [x] FastAPI service
- [x] PostgreSQL staging DB
- [x] NEX Lookup (EAN â†’ PLU)
- [x] GUI zobrazenie faktÃºr a poloÅ¾iek
- [x] Windows Service deployment
- [x] Cloudflare Tunnel konfigurÃ¡cia

---

### FÃZA 2: GO-LIVE Preview/Demo ğŸŸ¡ IN PROGRESS

**CieÄ¾:** PrezentÃ¡cia systÃ©mu zÃ¡kaznÃ­kovi (MÃ¡gerstav)

**Deliverables:**
- [x] End-to-end test na reÃ¡lnych dÃ¡tach
- [x] Deployment na zÃ¡kaznÃ­cky server
- [ ] Cloudflare Tunnel ako Windows Service
- [ ] DokumentÃ¡cia pre operÃ¡tora
- [ ] Demo session so zÃ¡kaznÃ­kom

**Scope:**
- OperÃ¡tor uvidÃ­ faktÃºru v GUI
- Bez zÃ¡pisu do NEX Genesis
- ValidÃ¡cia AI extrakcie

---

### FÃZA 3: Btrieve Models âšª TODO

**CieÄ¾:** Vytvorenie modelov pre zvyÅ¡nÃ© Btrieve tabuÄ¾ky

**Deliverables:**
- [ ] TSH Model (hlaviÄka DL)
- [ ] TSI Model (poloÅ¾ky DL)
- [ ] PLS Model (predajnÃ½ cennÃ­k)
- [ ] RPC Model (poÅ¾iadavky na zmeny cien)

**TechnickÃ© Ãºlohy:**
1. AnalyzovaÅ¥ Å¡truktÃºru TSHA-001.BTR
2. AnalyzovaÅ¥ Å¡truktÃºru TSIA-001.BTR
3. AnalyzovaÅ¥ Å¡truktÃºru PLSnnnnn.BTR
4. AnalyzovaÅ¥ Å¡truktÃºru RPCnnnnn.BTR
5. VytvoriÅ¥ Python modely
6. Unit testy pre READ operÃ¡cie

---

### FÃZA 4: GUI EditÃ¡cia + FarebnÃ© rozlÃ­Å¡enie âšª TODO

**CieÄ¾:** OperÃ¡tor vie editovaÅ¥ poloÅ¾ky a vidÃ­ stav

**Deliverables:**
- [ ] FarebnÃ© rozlÃ­Å¡enie poloÅ¾iek (PLU = 0)
- [ ] VÃ½ber tovarovej skupiny (MGLST lookup)
- [ ] EditÃ¡cia nÃ¡zvu poloÅ¾ky
- [ ] Kontrola marÅ¾e (nÃ¡kupnÃ¡ vs predajnÃ¡)
- [ ] EditÃ¡cia predajnej ceny
- [ ] OznaÄenie poloÅ¾iek so zmenenou cenou

**UI Farby:**
| Stav | Farba | VÃ½znam |
|------|-------|--------|
| PLU > 0 | Biela | Existuje v GSCAT |
| PLU = 0, bez skupiny | ÄŒervenÃ¡ | Treba priradiÅ¥ skupinu |
| PLU = 0, so skupinou | OranÅ¾ovÃ¡ | PripravenÃ© na vytvorenie |
| Cena zmenenÃ¡ | Å½ltÃ¡ | PÃ´jde do RPC |

---

### FÃZA 5: Vytvorenie produktovÃ½ch kariet âšª TODO

**CieÄ¾:** SystÃ©m vie vytvoriÅ¥ novÃ© produkty v GSCAT

**Deliverables:**
- [ ] Btrieve WRITE pre GSCAT
- [ ] AutomatickÃ© generovanie PLU (MAX+1)
- [ ] Btrieve WRITE pre BARCODE
- [ ] Refresh PLU po vytvorenÃ­
- [ ] ValidÃ¡cia (Å¾iadny PLU = 0)
- [ ] Error handling a rollback

**Workflow:**
```
1. OperÃ¡tor priradÃ­ skupinu vÅ¡etkÃ½m novÃ½m poloÅ¾kÃ¡m
2. Klikne "VytvoriÅ¥ novÃ© poloÅ¾ky"
3. SystÃ©m vytvorÃ­ GSCAT + BARCODE zÃ¡znamy
4. SystÃ©m refreshne PLU
5. ValidÃ¡cia: vÅ¡etky poloÅ¾ky majÃº PLU > 0
```

---

### FÃZA 6: Zaevidovanie dodÃ¡vateÄ¾skÃ©ho DL âšª TODO

**CieÄ¾:** SystÃ©m vie vytvoriÅ¥ DL v NEX Genesis

**Deliverables:**
- [ ] Btrieve WRITE pre TSH (hlaviÄka)
- [ ] Btrieve WRITE pre TSI (poloÅ¾ky)
- [ ] AutomatickÃ© ÄÃ­slovanie dokladu
- [ ] VÃ¤zba na dodÃ¡vateÄ¾a (PAB)
- [ ] SpÃ¤tnÃ¡ kontrola sÃºm
- [ ] Nastavenie status "PripravenÃ½"

**Workflow:**
```
1. VÅ¡etky poloÅ¾ky majÃº PLU > 0
2. OperÃ¡tor klikne "ZaevidovaÅ¥ DL"
3. SystÃ©m vytvorÃ­ TSH hlaviÄku
4. SystÃ©m vytvorÃ­ TSI poloÅ¾ky
5. SpÃ¤tnÃ¡ kontrola: suma TSI = suma XML
6. OznaÄenie faktÃºry v staging ako completed
```

---

### FÃZA 7: PoÅ¾iadavky na zmenu cien âšª TODO

**CieÄ¾:** SystÃ©m vie vytvoriÅ¥ RPC zÃ¡znamy

**Deliverables:**
- [ ] Btrieve READ pre PLS (aktuÃ¡lne ceny)
- [ ] Btrieve WRITE pre RPC
- [ ] AutomatickÃ© vytvorenie pri ukladanÃ­ DL
- [ ] VÃ¤zba na PLU produktu

**Workflow:**
```
1. OperÃ¡tor zmenÃ­ predajnÃº cenu (poloÅ¾ka â†’ Å¾ltÃ¡)
2. Pri ukladanÃ­ DL systÃ©m identifikuje Å¾ltÃ© poloÅ¾ky
3. Pre kaÅ¾dÃº Å¾ltÃº poloÅ¾ku vytvorÃ­ RPC zÃ¡znam
4. RPC obsahuje: PLU, novÃ¡ cena, dÃ¡tum
```

---

### FÃZA 8: Testovanie + Production Hardening âšª TODO

**CieÄ¾:** StabilnÃ½, produkÄne pripravenÃ½ systÃ©m

**Deliverables:**
- [ ] End-to-end testy celÃ©ho workflow
- [ ] Stress testing (veÄ¾kÃ© faktÃºry)
- [ ] Error recovery testy
- [ ] AutomatickÃ½ backup (Task Scheduler)
- [ ] SMTP notifikÃ¡cie overenie
- [ ] Monitoring a alerting
- [ ] DokumentÃ¡cia pre operÃ¡tora
- [ ] Troubleshooting guide

---

### FÃZA 9: ÄalÅ¡Ã­ zÃ¡kaznÃ­ci + RozÅ¡Ã­renia âšª FUTURE

**CieÄ¾:** Å kÃ¡lovanie a vylepÅ¡enia

**Deliverables:**
- [ ] Onboarding ANDROS
- [ ] Onboarding ÄalÅ¡Ã­ch zÃ¡kaznÃ­kov
- [ ] Extractory pre ÄalÅ¡Ã­ch dodÃ¡vateÄ¾ov
- [ ] AI validÃ¡cia extrakcie
- [ ] AI automatickÃ© priradenie skupÃ­n
- [ ] Priamy email bez operÃ¡tora
- [ ] Dashboard a reporting

---

## 3. ZÃVISLOSTI MEDZI FÃZAMI

```
FÃZA 1 â”€â”€â†’ FÃZA 2 â”€â”€â†’ FÃZA 3 â”€â”€â”¬â”€â”€â†’ FÃZA 4 â”€â”€â†’ FÃZA 5 â”€â”€â”¬â”€â”€â†’ FÃZA 6 â”€â”€â†’ FÃZA 7
                               â”‚                        â”‚
                               â”‚                        â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    (paralelne moÅ¾nÃ©)

FÃZA 8 zÃ¡visÃ­ na: FÃZA 5, 6, 7 (kompletnÃ½ workflow)
FÃZA 9 zÃ¡visÃ­ na: FÃZA 8 (stabilnÃ½ systÃ©m)
```

---

## 4. RIZIKÃ A MITIGÃCIE

| Riziko | Dopad | MitigÃ¡cia |
|--------|-------|-----------|
| Btrieve WRITE zlyhÃ¡ | VysokÃ½ | PostupnÃ© testovanie, rollback mechanizmus |
| NeznÃ¡ma Å¡truktÃºra TSH/TSI | StrednÃ½ | AnalÃ½za existujÃºcich dokladov v NEX Genesis |
| VÃ½kon pri veÄ¾kÃ½ch faktÃºrach | StrednÃ½ | Batch processing, async operÃ¡cie |
| ZÃ¡kaznÃ­k neschvÃ¡li workflow | VysokÃ½ | IteratÃ­vne demo, Ãºpravy podÄ¾a feedback |

---

## 5. TECHNICKÃ‰ DLHY

| PoloÅ¾ka | Popis | Priorita |
|---------|-------|----------|
| Cloudflare Tunnel Service | Nie je ako Windows Service | VysokÃ¡ |
| SMTP konfigurÃ¡cia | NeoverenÃ© | StrednÃ¡ |
| AutomatickÃ½ backup | Neexistuje | StrednÃ¡ |
| Test coverage editor | NÃ­zke | NÃ­zka |

---

## 6. BUDÃšCE ROZÅ ÃRENIA (Backlog)

### 6.1 AI VylepÅ¡enia
- AI validÃ¡cia extrakcie (Claude API)
- AI automatickÃ© priradenie tovarovÃ½ch skupÃ­n
- AI fallback pri zlyhanÃ­ regex extrakcie

### 6.2 AutomatizÃ¡cia
- Priamy email od dodÃ¡vateÄ¾a (bez operÃ¡tora)
- AutomatickÃ© naskladnenie (integrÃ¡cia s NEX Genesis)
- Scheduled processing (batch mÃ³d)

### 6.3 Multi-tenant
- Dashboard pre vÅ¡etkÃ½ch zÃ¡kaznÃ­kov
- CentralizovanÃ© reporting
- Customer self-service portal

### 6.4 ÄalÅ¡ie moduly
- Customer Order Processing
- Inventory Management
- Financial Reporting

---

## 7. MILESTONE CHECKLIST

### Milestone 1: GO-LIVE Preview âœ…
- [x] Email â†’ Staging funguje
- [x] GUI zobrazuje faktÃºry
- [ ] Demo zÃ¡kaznÃ­kovi

### Milestone 2: ProduktovÃ© karty
- [ ] GSCAT WRITE funguje
- [ ] BARCODE WRITE funguje
- [ ] OperÃ¡tor vie vytvoriÅ¥ novÃ© produkty

### Milestone 3: DodacÃ­ list
- [ ] TSH WRITE funguje
- [ ] TSI WRITE funguje
- [ ] OperÃ¡tor vie zaevidovaÅ¥ DL

### Milestone 4: Zmeny cien
- [ ] PLS READ funguje
- [ ] RPC WRITE funguje
- [ ] AutomatickÃ© vytvorenie RPC

### Milestone 5: Production Ready
- [ ] KompletnÃ½ workflow testovanÃ½
- [ ] Error handling kompletnÃ½
- [ ] DokumentÃ¡cia kompletnÃ¡
- [ ] ZÃ¡kaznÃ­k pouÅ¾Ã­va denne

---

**Dokument vytvorenÃ½:** 2025-11-26  
**Autor:** Claude AI + ZoltÃ¡n Rausch