# INIT PROMPT - NEX Automat: Database Table Docs Migration (Batch 6 Continue)

**Projekt:** nex-automat  
**Ãšloha:** Database table docs migration (batch 6 continuation - Stock Management section)  
**Developer:** ZoltÃ¡n (40 rokov skÃºsenostÃ­)  
**Jazyk:** SlovenÄina  
**Previous Session:** https://claude.ai/chat/[PREVIOUS_CHAT_URI]  
**Status:** 13/28 dokumentov dokonÄenÃ½ch, **15 zostÃ¡va**

---

## âš ï¸ KRITICKÃ‰: COLLABORATION RULES

**MUSÃÅ  dodrÅ¾iavaÅ¥ 22 pravidiel z memory_user_edits!**

KÄ¾ÃºÄovÃ© pravidlÃ¡ pre tÃºto session:
- **Rule #7:** CRITICAL artifacts pre vÅ¡etky dokumenty/kÃ³d
- **Rule #8:** Step-by-step, confirmation pred pokraÄovanÃ­m
- **Rule #20:** "novy chat" = **3 artifacts** (SESSION_ARCHIVE, INIT, commit)
- **Rule #5:** Slovak language, presnÃ¡ terminolÃ³gia projektov
- **Rule #22:** Na zaÄiatku kaÅ¾dÃ©ho chatu skontrolovaÅ¥ vÅ¡etky pravidlÃ¡

---

## âœ… ÄŒO SME DOKONÄŒILI V PREVIOUS SESSIONS

### Partners Section - COMPLETE! (8 dokumentov)

1. **BANKLST-bank_catalog.md** (script #32)
2. **PAB-partner_catalog.md** (script #33)
3. **PABACC-partner_catalog_bank_accounts.md** (script #34)
4. **PACNCT-partner_catalog_contacts.md** (script #35)
5. **PAGLST-partner_categories.md** (14.9 KB â†’ 7.0 KB, 53%)
6. **PAYLST-payment_methods.md** (8.3 KB â†’ 4.2 KB, 49%)
7. **TRPLST-transport_methods.md** (8.6 KB â†’ 4.3 KB, 50%)
8. **PANOTI-partner_catalog_texts.md** (15.4 KB â†’ 6.5 KB, 58%)
9. **PASUBC-partner_catalog_facilities.md** (18.0 KB â†’ 7.5 KB, 58%)

### Products Section - COMPLETE! (5 dokumentov)

1. **BARCODE-product_catalog_identifiers.md** (24.2 KB â†’ 10.5 KB, 56.6%)
2. **FGLST-product_categories.md** (16.1 KB â†’ 7.0 KB, 56.5%)
3. **GSCAT-product_catalog.md** (20.7 KB â†’ 10.5 KB, 49.3%)
4. **MGLST-product_categories.md** (17.4 KB â†’ 7.5 KB, 56.9%)
5. **SGLST-product_categories.md** (20.1 KB â†’ 8.5 KB, 57.7%)

---

## ğŸ“Š PROGRESS

**DokonÄenÃ©:** 13/28 dokumentov (46.4%)  
**ZostÃ¡va:** 15 database table dokumentov

**By Category:**
- âœ… **Partners:** 8/8 (100%) - **COMPLETE**
- âœ… **Products:** 5/5 (100%) - **COMPLETE**
- â³ **Stock Management:** 0/7 (0%)
- â³ **Accounting:** 0/3 (0%)
- â³ **Sales:** 0/1 (0%)

---

## ğŸ¯ ÄŒO TREBA UROBIÅ¤ TERAZ

### Priority 1: Stock Management Section (START HERE!)

**OdporÃºÄanÃ© poradie (menÅ¡ie â†’ vÃ¤ÄÅ¡ie):**

1. **WRILST-facilities.md-old** (17.9 KB) â† **ZAÄŒNI TÃMTO**
2. **STKLST-stocks.md-old** (20.4 KB)
3. **TSH-supplier_delivery_heads.md-old** (25.4 KB)
4. **FIF-stock_card_fifos.md-old** (28.5 KB)
5. **TSI-supplier_delivery_items.md-old** (29.7 KB)
6. **STM-stock_card_movements.md-old** (35.6 KB) âš ï¸ VEÄ½KÃ
7. **STK-stock_cards.md-old** (38.5 KB) âš ï¸ VEÄ½KÃ

**VÅ¡etky pravdepodobne v adresÃ¡ri STORES** (overiÅ¥ pri kaÅ¾dom).

---

## ğŸ“‚ ZOSTÃVAJÃšCE DOKUMENTY (15 total)

### Stock Management (7 sÃºborov)

- WRILST-facilities.md-old (17.9 KB)
- STKLST-stocks.md-old (20.4 KB)
- TSH-supplier_delivery_heads.md-old (25.4 KB)
- FIF-stock_card_fifos.md-old (28.5 KB)
- TSI-supplier_delivery_items.md-old (29.7 KB)
- STM-stock_card_movements.md-old (35.6 KB) âš ï¸ VEÄ½KÃ
- STK-stock_cards.md-old (38.5 KB) âš ï¸ VEÄ½KÃ

### Accounting (3 sÃºbory)

- ISH-supplier_invoice_heads.md-old (34.8 KB)
- ISI-supplier_invoice_items.md-old (29.6 KB)
- PAYJRN-payment_journal.md-old (25.8 KB)

### Sales (1 sÃºbor)

- PLSnnnnn-price_list_items.md-old (20.5 KB)

---

## ğŸ”§ KRITICKÃ‰ TECHNICKÃ‰ INFO

### OverenÃ½ Workflow

1. **web_fetch** - naÄÃ­taÅ¥ .md-old z GitHubu
2. **OpÃ½taÅ¥ sa na Btrieve location** (user poskytne adresÃ¡r)
3. **VytvoriÅ¥ 1 artifact** - vyÄistenÃ½ dokument
4. **User skopÃ­ruje obsah + zmaÅ¾e starÃ½ sÃºbor** - manuÃ¡lne
5. **PokraÄuj ÄalÅ¡Ã­m dokumentom**

### Btrieve Locations (zistenÃ© doteraz)

**DIALS adresÃ¡r:**
- BANKLST.BTR, PAB.BTR, PABACC.BTR, PACNCT.BTR
- PAGLST.BTR, PAYLST.BTR, TRPLST.BTR
- PANOTI.BTR, PASUBC.BTR

**STORES adresÃ¡r:**
- BARCODE.BTR, FGLST.BTR, GSCAT.BTR, MGLST.BTR, SGLST.BTR
- Pravdepodobne aj vÅ¡etky Stock Management sÃºbory (overiÅ¥!)

### FormÃ¡t Ãšprav (konzistentnÃ½)

**PridÃ¡vame:**
- Btrieve sÃºbor info:
  ```markdown
  ### Btrieve sÃºbor
  - **NÃ¡zov:** [FILE].BTR
  - **Umiestnenie:** `C:\NEX\YEARACT\[DIR]\[FILE].BTR`
    - PremennÃ¡ ÄasÅ¥: `C:\NEX\` (root path)
    - FixnÃ¡ ÄasÅ¥: `\YEARACT\[DIR]\`
  - **ÃšÄel:** [popis]
  ```
- AktualizovanÃ© metadÃ¡ta (dÃ¡tum: 2025-12-15)
- Status: âœ… PripravenÃ© na migrÃ¡ciu

**OdstraÅˆujeme:**
- CREATE TABLE statements
- CREATE INDEX statements
- CREATE TRIGGER statements
- CREATE FUNCTION statements
- Query patterns (veÄ¾kÃ© SQL bloky)
- Python migration code
- VeÄ¾kÃ© INSERT prÃ­klady

**ZachovÃ¡vame:**
- Mapping polÃ­ (Btrieve â†’ PostgreSQL)
- Biznis logika (koncepÄnÃ½ popis)
- VzÅ¥ahy s inÃ½mi tabuÄ¾kami (popis)
- ValidaÄnÃ© pravidlÃ¡ (koncepÄnÃ½ popis)
- PoznÃ¡mky pre migrÃ¡ciu (koncepÄnÃ©, BEZ kÃ³du)
- MalÃ© prÃ­klady dÃ¡t (ukÃ¡Å¾kovÃ©)

### PriemernÃ¡ Redukcia

**53.6% veÄ¾kosti** (overenÃ© na 13 dokumentoch)
- Partners: 49-58%
- Products: 49-58%
- Expected pre Stock Management: podobnÃ©

---

## ğŸ’¡ KRITICKÃ‰ POZNÃMKY PRE MIGRÃCIU

### 1. Audit Polia Pattern (Å¡tandard vÅ¡ade)

**created_by/created_at:**
- Kto a kedy vytvoril zÃ¡znam (nemennÃ©)
- Pri migrÃ¡cii: CrtUser/CrtDate/CrtTime
- Ak neexistuje: 'MIGRATION' + CURRENT_TIMESTAMP

**updated_by/updated_at:**
- Kto a kedy naposledy modifikoval (aktualizuje sa pri zmene)
- Pri migrÃ¡cii: ModUser/ModDate/ModTime
- Ak neexistuje: pouÅ¾iÅ¥ CrtUser alebo 'MIGRATION'

### 2. Mapping Dictionary Pattern (pre ÄÃ­selnÃ­ky)

Pri migrÃ¡cii zÃ¡vislÃ½ch tabuliek:
1. Najprv migrovaÅ¥ ÄÃ­selnÃ­k
2. VytvoriÅ¥ mapping dictionary (Code â†’ ID)
3. PouÅ¾iÅ¥ pri migrÃ¡cii hlavnej tabuÄ¾ky

### 3. Stock Management Specific Notes

**FIFO zÃ¡znamy (FIF):**
- Sledovanie prijatÃ½ch Å¡arÅ¾Ã­ produktov
- VÃ¤zba na stock cards (STK)

**Stock Movements (STM):**
- VeÄ¾kÃ½ poÄet zÃ¡znamov (vÅ¡etky pohyby)
- PotrebnÃ© indexy pre performance

**Facilities (WRILST):**
- ÄŒÃ­selnÃ­k skladov/oddelenÃ­
- Base table pre STKLST

---

## ğŸ“ DOKUMENTAÄŒNÃ‰ Å TANDARDY

### Documentation Manifest Location

```
C:\Development\nex-automat\SESSION_NOTES\docs.json
```

### GitHub Raw URL Pattern

```
https://raw.githubusercontent.com/rauschiccsk/nex-automat/develop/docs/architecture/database/[path]
```

**Stock Management paths:**
```
docs/architecture/database/stock/cards/tables/
docs/architecture/database/stock/documents/tables/
```

---

## âš¡ WORKFLOW BEST PRACTICES

### OverenÃ½ Proces (funguje dobre)

1. **NaÄÃ­taj dokument** (web_fetch)
2. **OpÃ½taj sa na Btrieve location** (user poskytne adresÃ¡r)
3. **Vytvor upravenÃ½ dokument** (artifact)
4. **User skopÃ­ruje obsah + zmaÅ¾e starÃ½ sÃºbor**
5. **PokraÄuj ÄalÅ¡Ã­m dokumentom**

### KomunikÃ¡cia

âœ… **StruÄne** - Å¾iadny verbose output  
âœ… **Akcie** - artifacts, konkrÃ©tne kroky  
âœ… **ÄŒakanie** - po kaÅ¾dom artifacte ÄakaÅ¥ na potvrdenie  
âœ… **Progress** - token stats na konci kaÅ¾dej odpovede

---

## ğŸš€ IMMEDIATE ACTION

**PrvÃ½ krok po naÄÃ­tanÃ­ tohto promptu:**

1. Skontroluj memory_user_edits (22 pravidiel) âœ…
2. NaÄÃ­taj **WRILST-facilities.md-old** z GitHubu
3. OpÃ½taj sa: "V akom adresÃ¡ri je WRILST.BTR?"
4. Po odpovedi vytvor artifact s vyÄistenÃ½m dokumentom
5. ÄŒakaj na potvrdenie a pokraÄuj STKLST

**OdporÃºÄanÃ½ workflow pre session:**
1. **WRILST-facilities.md-old** (17.9 KB) - menÅ¡Ã­, dobrÃ½ na rozbeh
2. **STKLST-stocks.md-old** (20.4 KB)
3. **TSH-supplier_delivery_heads.md-old** (25.4 KB)
4. PodÄ¾a Äasu a tokenov pokraÄovaÅ¥ ÄalÅ¡Ã­mi

---

## ğŸ“ˆ SUCCESS METRICS

**Pre tÃºto session oÄakÃ¡vame:**
- âœ… 3-5 Stock Management dokumentov dokonÄenÃ½ch
- âœ… Progress: 16-18/28 sÃºborov (57-64%)
- âœ… KonzistentnÃ½ Å¡tÃ½l s predchÃ¡dzajÃºcimi dokumentmi

**Estimated time:** 90-120 minÃºt

---

## ğŸ¯ DECISION FRAMEWORK QUICK REFERENCE

| Typ dokumentu | Rozhodnutie | PrÃ­klad |
|---------------|-------------|---------|
| Database table mapping | CLEAN + KEEP | VÅ¡etky .md-old v batch 6 |
| SQL scripts | REMOVE | CREATE TABLE, INDEX, TRIGGER |
| Python migration code | REMOVE | VeÄ¾kÃ© bloky kÃ³du |
| Mapping tables | KEEP | Btrieve â†’ PostgreSQL |
| Biznis logika | KEEP | KoncepÄnÃ½ popis |
| Query patterns | REMOVE | Mnoho SQL SELECT blokov |
| PrÃ­klady dÃ¡t | KEEP MINIMAL | MalÃ© ukÃ¡Å¾kovÃ© INSERT |

---

## ğŸ“ GIT WORKFLOW (user robÃ­ manuÃ¡lne)

```powershell
# Git workflow
git status
git add docs/
git commit -m "docs: Database table docs batch 6 - stock management (N docs)"
git push origin develop

# Generate manifests
python tools/generate_manifests.py
```

---

**Token Budget:** 190,000  
**Estimated Session:** 90-120 minÃºt  
**Ready to Continue:** âœ… ÃNO

---

**KONIEC INIT PROMPTU**